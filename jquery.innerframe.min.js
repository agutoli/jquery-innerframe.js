/**
 * Jquery innerframe
 *
 * @author       Bruno Thiago Leite Agutoli <bruno.agutoli@gmail.com>
 * @collatorated Tcha-Tcho <tchatcho66@hotmail.com>
 * @version      Release: 0.0.1-alpha
 * @license      http://www.gnu.org/licenses/gpl.html GNU GENERAL PUBLIC LICENSE
 */
(function(a){a.fn.innerframe=function(b,c){var d=a(this),e={width:"100px",height:"100px",style:"",scrolling:"no",frameBorder:"0",name:"",onReady:function(){},seamless:"seamless",srcdoc:""},f=c?a.extend(e,c):e,g=document.createElement("iframe");g.id=("innerframe_"+(new Date).getTime()+Math.random()).replace(".","_");for(option in f)"function"!=typeof f[option]&&g.setAttribute(option,f[option]);window.setTimeout(function(){h._onReadyIframe()},1);var h={_contentWindow:function(){return g.contentWindow.document?g.contentWindow:document.frames[g.id]},_write:function(b){var c=h._contentWindow().document;window[g.id+"_im_ready"]=function(b){$doc=a("body",b.document),$doc.find("#innerframe_interval").remove(),h._onReadyInnerIframe($doc)},c.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><html><head><meta http-Equiv="Cache-Control" Content="no-cache,no-store,must-revalidate" /><meta http-Equiv="Pragma" Content="no-cache" /><meta http-Equiv="Expires" Content="0" /><meta http-equiv="Content-Type" content="text/html;charset=UTF-8" /></head><body style="margin:0;padding:0;">'+b+"</body></html>"+'<script id="innerframe_interval">'+"window.__onloadIframe"+g.id+" = window.setInterval(function(){"+"if (typeof document.getElementsByTagName(\"body\")[0] != 'undefined'){"+"clearInterval(window.__onloadIframe"+g.id+");"+"window.parent."+g.id+"_im_ready(window);"+"if (typeof window.stop != 'undefined') {"+"window.stop();"+"}"+"}"+"}, 5000);"+"</script>"),a(g).attr("style",f.style)},_onReadyIframe:function(){h._write(b)},_onReadyInnerIframe:function(a){f.onReady(a)}};return this.each(function(){d.append(g)}),this}})(jQuery);